{
    "collab_server" : "",
    "contents" : "setwd(\"~/Documentos/Shiny/Shiny-NIS2\")\n\nlibrary(\"reticulate\")\nreticulate::use_python(\"/home/paula/anaconda3/bin/python\", required = TRUE)\nnexinfosys <- import(\"nexinfosys\")\nc <- nexinfosys$NISClient(\"http://0.0.0.0:5000/nis_api\")     \nfname <- \"Netherlandsv1ToNIS.xlsx\"\nc$login(\"test_user\")\nprint(\"Logged in\")\nc$open_session()\nprint(\"Session opened\")\nn <- c$load_workbook(fname, \"NIS_agent\", \"NIS_agent@1\")\nprint(paste(\"N worksheets: \",n))\nr <- c$submit()\nprint(\"Returned from submit\")\nr <- c$query_available_datasets()\nds <- c$query_datasets(c(tuple(\"flow_graph_solution\", \"csv\", \"dataframe\")))\ndf <- py_to_r(ds[[1]][[3]])\n\n\ndf<-subset(df,select = -c(Conflict_Partof,Conflict_Itype,Computed,Expression))\ndf$Value<-as.numeric(lapply(df$Value,str_replace ,pattern = \",\",replacement = \".\"))\n\n\ndata<-datos\ndata$Period<-as.numeric(data$Period)\nScenarios <- as.vector(unique(data$Scenario))\nPeriods<- as.vector(unique(data$Period))\nProcessors<- as.vector(unique(data$Processor))\nInterfaces<- as.vector(unique(data$Interface))\nScopes<- as.vector(unique(data$Scope))\nLevel <-as.vector(unique(data$Level))\nSystems<- as.vector (unique(data$System))\nSubsystems<-as.vector(unique(data$Subsystem))\nFlow<- filter(data, data$RoegenType == \"flow\" | data$RoegenType == \"Flow\")\nFund<- filter(data, data$RoegenType == \"Fund\" | data$RoegenType == \"fund\")\nFlowInterfaces<- as.vector(unique(Flow$Interface))\nFundInterfaces <- as.vector(unique(Fund$Interface))\n\n\ndf <- filter(data,data$Scenario == Scenario[1] & data$Period == Period[1]  & data$Interface == Interface[1], data$Scope == Scope[1])\n\ndf$per<-round(df$Value/sum(df$Value)*100, digits = 3)\ndf$names_per <-paste(df$Processor,df$per,\"%\", sep = \" \")\nplt <- ggplot (df, aes( x = \"\" ,  y = Value, fill = names_per)) + geom_bar(width = 1, stat = \"identity\")\npie <- plt + coord_polar(\"y\", start=0)\n\npie\n\nc$close_session()\nc$logout()",
    "created" : 1580286036243.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "3425549070",
    "id" : "1C827C1E",
    "lastKnownWriteTime" : 1580459301,
    "last_content_update" : 1580459301400,
    "path" : "~/Documentos/Shiny/Shiny-NIS2/RToNIS.R",
    "project_path" : "RToNIS.R",
    "properties" : {
    },
    "relative_order" : 1,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}